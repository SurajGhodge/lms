<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Leave Records - Admin</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<style>
body {
	background: linear-gradient(135deg, #1e3c72, #2a5298);
	min-height: 100vh;
	display: flex;
	flex-direction: column;
}

.table-container {
	max-height: 500px;
	overflow-y: auto;
}
</style>
</head>
<body>
	<!-- Common fragments -->
	<div th:replace="~{fragments/bootstrap :: bootstrapHeader('Home')}"></div>
	<div th:replace="~{fragments/admin_header :: siteHeader}"></div>

	<div class="container p-5">
		<h1 class="mb-4 text-center text-white">Leave Records</h1>

		<div class="table-container">
			<table class="table table-bordered table-hover table-striped shadow">
				<thead class="table-dark">
					<tr>
						<th>Leave ID</th>
						<th>Employee Name</th>
						<th>Reason</th>
						<th>From</th>
						<th>To</th>
						<th>Days</th>
						<th>Status</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					<!-- Loop over leave records -->
					<tr th:each="leave : ${leaves}">
						<td th:text="${leave.leaveId}"></td>
						<td th:text="${leave.employee.name}"></td>
						<td th:text="${leave.reason}"></td>
						<td th:text="${leave.fromDate}"></td>
						<td th:text="${leave.toDate}"></td>
						<td th:text="${leave.days}"></td>
						<td th:text="${leave.status}"></td>
						<td>
							<form
								th:action="@{/api/leaves/approve/{id}(id=${leave.leaveId})}"
								method="post" style="display: inline;">
								<button type="submit" class="btn btn-success btn-sm">Approve</button>
							</form>

							<form th:action="@{/api/leaves/reject/{id}(id=${leave.leaveId})}"
								method="post" style="display: inline;">
								<button type="submit" class="btn btn-danger btn-sm">Reject</button>
							</form>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
</body>
</html>
